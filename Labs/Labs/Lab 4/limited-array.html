<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Limited</title>
</head>

<body>
    <p id="lorem">Lorem ipsum dolor sit amet.
        <script>
        var poem = poemAssembler(createStringReplacements());



        function carlPoem() {
            alert("Ready for Carl's poem?");
            var p;
            for (i = 0; i < poem.length; i++) {
                p = document.createElement("p");
                p.innerHTML = poem[i];
                document.body.appendChild(p);
            }

        }


        function poemAssembler(stringRplObj) {
            var limited = ['I AM riding on a limited express, one of the crack trains of the nation.', 'Hurtling across the prairie into blue haze and dark air go fifteen all-steel coaches holding a thousand people.', '(All the coaches shall be scrap and rust and all the men and women laughing in the diners and sleepers shall pass to ashes.)', 'I ask a man in the smoker where he is going and he answers: "Omaha."'];
            var stringRplObjKeys = Object.keys(stringRplObj);

            for (i = 0; i < limited.length; i++) {

                for (j = 0; j < stringRplObjKeys.length; j++) {

                    limited[i] = limited[i].replace(stringRplObjKeys[j], stringRplObj[stringRplObjKeys[j]]);
                }

            }

            return limited;
        }

        function createStringReplacements() {
            var replaceTheseStringsObj = {

                "trains": "a href= 'http://en.wikipedia.org/wiki/Train'>trains</a>",
                "Omaha": "<a href= 'http://en.wikipedia.org/wiki/Omaha'</a>"
            };

           return replaceTheseStringsObj;
        }
        window.onload = carlPoem;
        </script>
</body>

</html>
